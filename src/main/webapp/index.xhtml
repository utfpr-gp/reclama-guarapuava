<ui:composition template="./WEB-INF/templates/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:jsf="http://xmlns.jcp.org/jsf"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pretty="http://ocpsoft.com/prettyfaces">
    <ui:define name="content">
        <header id="home-page-header">
            <div class="container">
                <img id="image-header" src="resources/images/gp.jpg" />
            </div>
            <div id="box-action">
                <h:panelGroup rendered="#{not empty sessionUserBean.currentUser}">
                    <pretty:link mappingId="occurrence-record" class="waves-effect waves-light btn blue darken-3">
                        <f:view>PUBLICAR UMA OCORRENCIA</f:view>
                    </pretty:link>
                </h:panelGroup>

                <h:panelGroup rendered="#{empty sessionUserBean.currentUser}">
                    <pretty:link mappingId="sign-in" class="waves-effect waves-light btn blue darken-3">
                        <f:view>PUBLICAR UMA OCORRENCIA</f:view>
                    </pretty:link>
                </h:panelGroup>
            </div>

            <div id="box-text-header" class="center-align">
                <p>Ajude a construir uma Guarapuava melhor.</p>
                <p>Entre e nos conte o problema que você identificou.</p>
            </div>
            
        </header>

        <p:messages></p:messages>

        <article id="index-content" class="container">
            <header class="center-align">
                <h3>Publique, veja, avalie, compartilhe e opine.</h3>
                <h4>Para juntos fazermos uma cidade melhor.</h4>
            </header>

            <div class="row">
                <div class="col s12">
                    <div class="event-card grey lighten-1">
                        <div class="container card-body">
                            <div class="row">
                                <div class="col s2 card-icon">
                                    <i class="fa fa-th-large" aria-hidden="true" />
                                </div>
                                <div class="col s8 card-text center-align">
                                    <p>TODAS OCORRÊNCIAS</p>
                                </div>
                                <div class="col s2 card-action">
                                    <div class="box center-align">
                                        <span>#{occurrenceBean.findAll().size()}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <ui:repeat value="#{categoryBean.findAll()}" var="category">

                    <div class="col s12 m6">
                        <div class="event-card green darken-1">
                            <div class="container card-body">
                                <div class="row">
                                    <div class="col s6 card-text center">
                                        <p>#{category.name}</p>
                                    </div>
                                    <div class="col push-s4 s2 card-action">
                                        <div class="box center-align">
                                            <span>#{category.occurrences.size()}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </ui:repeat>
            </div>
        </article>
    </ui:define>
</ui:composition>